<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>WIB</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="http://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
    <script src="http://localhost:3000/socket.io/socket.io.js"></script>

    <!--<link rel="stylesheet" type="text/css" href="../CSS/index.css">-->
    <link rel="stylesheet" type="text/css" href="../CSS/cover.css">

    <script>
    $(document).ready(function() {
        $("body").css("display", "block");
        particlesJS("particles-js", {
            "particles": {
                "number": {"value": 80, "density": {"enable": true, "value_area": 800}},
                "color": {"value": "#ffffff"},
                "shape": {
                    "type": "triangle",
                    "stroke": {"width": 0, "color": "#000000"},
                    "polygon": {"nb_sides": 5},
                    "image": {"src": "img/github.svg", "width": 100, "height": 100}
                },
                "opacity": {
                    "value": 0.5,
                    "random": false,
                    "anim": {"enable": false, "speed": 1, "opacity_min": 0.1, "sync": false}
                },
                "size": {
                    "value": 3,
                    "random": true,
                    "anim": {"enable": false, "speed": 40, "size_min": 0.1, "sync": false}
                },
                "line_linked": {"enable": true, "distance": 150, "color": "#ffffff", "opacity": 0.4, "width": 1},
                "move": {
                    "enable": true,
                    "speed": 6,
                    "direction": "none",
                    "random": false,
                    "straight": false,
                    "out_mode": "out",
                    "bounce": false,
                    "attract": {"enable": false, "rotateX": 600, "rotateY": 1200}
                }
            },
            "interactivity": {
                "detect_on": "canvas",
                "events": {
                    "onhover": {"enable": true, "mode": "repulse"},
                    "onclick": {"enable": true, "mode": "push"},
                    "resize": true
                },
                "modes": {
                    "grab": {"distance": 400, "line_linked": {"opacity": 1}},
                    "bubble": {"distance": 400, "size": 40, "duration": 2, "opacity": 8, "speed": 3},
                    "repulse": {"distance": 200, "duration": 0.4},
                    "push": {"particles_nb": 4},
                    "remove": {"particles_nb": 2}
                }
            },
            "retina_detect": true
        });
    });

    let socket = io.connect('http://localhost:3000');

    function getCode(){
        //check if code is valid
        let code = document.entry.code.value;
        window.sessionStorage.setItem("userCode", code);
        console.log(code);
        socket.emit('getUser', code);
        socket.on('codeValidation', function(result){
            if(result === true){
                document.getElementById("entry").action =
                    "selectTimesFromCode.html";
                document.getElementById("entry").submit();

            } else{
                alert("Invalid code. Please try again.");
                document.getElementById("entry").submit();
            }
        })
    }
    </script>
</head>
<body>

<div id="particles-js">
    <div id = 'center' class = 'center'>
        <div id="left" class = 'inline' style = "margin-right: 50px;">
        <a href="createCal.html" class="blueButton" style = "font-size: 40px; padding: 3px 15px;">New Event</a>
        </div>

        <div id="right" class = 'inline left' style = "margin-left: 50px;">
            <form id = "entry" name = "entry" onsubmit="getCode()">
                <h1>Or enter code:</h1>
                <input id = "code" type = "text" placeholder = "c0f3e">
                <input id = "submitbutton" type = "button" value = "Go" onclick = "getCode()" class = "blueButton inline"/>
            </form>
        </div>
        <div id = 'logo'>when is better</div>
    </div>
    <a href="https://unsplash.com/@samuelzeller" style="float:right; margin-right: 10px;"> Photo by Samuel Zeller on Unsplash</a>

</div>

</body>
</html>